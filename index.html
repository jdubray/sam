<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>SAM - State | Action | Model</title>

    <!-- Styles -->
    <link href="assets/css/theDocs.all.min.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet' type='text/css'>

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="icon" href="assets/img/favicon.ico">
  </head>

  <body>

    <header class="site-header">

      <!-- Top navbar & branding -->
      <nav class="navbar navbar-default">
        <div class="container-fluid">

          <!-- Toggle buttons and brand -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
              <span class="glyphicon glyphicon-option-vertical"></span>
            </button>

            <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="index.html"><img src="assets/img/logo.png" alt="logo"></a>
          </div>
          <!-- END Toggle buttons and brand -->

          <!-- Top navbar -->
          <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://gitter.im/jdubray/sam" target="_blank">Support</a></li>
              <li class="hero"><a href="http://xgenio.com/contact-xgenio/">Contact us</a></li>
            </ul>
          </div>
          <!-- END Top navbar -->

        </div>
      </nav>
      <!-- END Top navbar & branding -->
      
    </header>


    <main class="container-fluid">
      <div class="row">

        <!-- Sidebar -->
        <aside class="col-lg-2 col-md-3 col-sm-3 sidebar">

          <ul class="sidenav dropable sticky">
            <li><a href="#">Overview</a></li>
            <li>
              <a class="active" href="#">Topics</a>
              <ul>
                <li><a href="#sam">Actions</a></li>
                <li><a href="#model">Model</a></li>
                <li><a href="#state">State</a></li>
                <li><a href="#sr">State Representation</a></li>
                <li><a href="#wiring">Wiring</a></li>
              </ul>
            </li>
            
            <li>
              <a class="active" href="#">Advanced Topics</a>
              <ul>
                <li><a href="#apis">APIs</a></li>
                <li><a href="#aa">Automatic Actions</a></li>
                <li><a href="#conc">Concurrency</a></li>
              </ul>
            </li>

            <li>
              <a href="#">Code Samples</a>
              <ul>
                <li><a href="#">Rocket Launcher</a></li>
                <li><a href="#">Blog</a></li>
              </ul>
            </li>

            <li>
              <a href="#">Frameworks</a>
              <ul>
                <li><a href="#">React</a></li>
                <li><a href="#">Angular</a></li>
                <li><a href="#">Cycle.js</a></li>
                <li><a href="#">Mithril</a></li>
                <li><a href="#">Elm</a></li>
              </ul>
            </li>

            <li>
              <a href="#">News</a>
              <ul>
                <li><a href="http://www.infoq.com/articles/no-more-mvc-frameworks">Why I no longer use MVC Frameworks?</a></li>
              </ul>
            </li>

          </ul>

        </aside>
        <!-- END Sidebar -->


        <!-- Main content -->
        <article class="col-lg-10 col-md-9 col-sm-9 main-content" role="main">
          
          <header>
            <h1>The SAM Pattern</h1>
            <p>SAM is a new reactive/functional pattern that simplifies Front-End architectures by clearly separating the business logic from the view and, in particular, strictly decoupling back-end APIs from the Front-End.</p>
            <p>SAM is unapologetically driven by simplicity and challenges the complexity of frameworks like Google's Angular or Facebook's React+JSX+Redux+GraphQL+Relay.</p>
            <p>SAM is also challenging architecture patterns like <a href="http://samnewman.io/patterns/architectural/bff/">BFF</a> or the Vertical Slice Pattern which suggest creating view specific APIs, per platform, app, versions of an app...</p>
            <p>This new pattern was first introduced in an <a href="http://www.infoq.com/articles/no-more-mvc-frameworks">InfoQ article</a>, by <a href="www.ebpml.org/about">Jean-Jacques Dubray</a></p>
            <ol class="toc">
              <li>
                <a href="#sam">How does SAM works?</a>
                <ol>
                  <li><a href="#vf">The View as a function of the Model</a></li>
                  <li><a href="#bl">Business Logic</a></li>
                </ol>
              </li>
              <li><a href="#getstarted">How can I get started?</a></li>
              <li><a href="#">Advanced Concepts</a></li>
            </ol>
          </header>

          <section>
            <h2 id="sam">How does SAM works?</h2>
            <p></p>SAM is a pattern that aims at replacing the MVC pattern. If you are already familiar with MVC, you should be able to make an easy transition to SAM.</p>
            <p>There are two main differences between MVC and SAM. First, SAM is reactive, while MVC is generally implemented in an interactive way. Some attempts have been made at implementing in a reactive way, however, SAM is not just a reactive implementation of MVC. 
            Second, SAM introduces the concept of State as a mechanism to further decouple the View from the Model and treats the view merely as a "State Representation".</p>
            <p>    
                <a = href="assets/figures/fig6.jpg"><img class="img-shadow img-responsive center-block" src="assets/figures/fig6.jpg" alt="the SAM pattern"/></a>
                
            </p>
            <h3 id="vf">The View as a Function of the Model</h3>
            <p>The best starting point to understand SAM is to understand the functional relationship between the view and the model. If you are familiar with React.js you probably noticed that one of the main goals of React's component model is to help you create the components's <code>render</code> function. 
            SAM suggests using the same approach and decomposing the view as a series of pure JavaScript functions. </p>
            <pre>V = f( M )</pre>
            <p>This concept is extremely simple to implement. I generally implement the front-end components as part of theme singleton:</p>
<div class="code-window"><pre><code class="language-markup">
var theme = {} ;

theme.ready = function(counter) {
    return (
           "&lt;p&gt;Counter:"+counter+"&lt;/p&gt;\n\
            &lt;form onSubmit=\"JavaScript:return actions.start({});\"&gt;\n\
                &lt;input type=\"submit\" value=\"Start\"&gt;\n\
            &lt;/form&gt;"
    ) ;
} 
</code></pre></div>
            <p></p>
            <h3 id="bl">Business Logic</h3>
            <p>
            SAM's factoring of the business logic is based on <a href="http://research.microsoft.com/en-us/um/people/lamport/tla/tla.html">TLA+</a>:
            <blockquote>TLA+ is based on the idea that the best way to describe things formally is with simple mathematics, and that a specification language should contain as little as possible beyond what is needed to write simple mathematics precisely. TLA+ is especially well suited for writing high-level specifications of concurrent and distributed systems.</blockquote>
            If you are interested in learning about TLA+, I found <a href="http://www.loria.fr/~merz/talks/argentina2005/slides.pdf">Stephan Merz's course</a> the most approachable introduction to TLA+.
            </p>
            <p>TLA+ is a formal specification which can be used describe, analyze and reason about systems, such as:</p>
            <ul>
                <li>sequential algorithms</li>
                <li>interactive systems</li>
                <li>reactive & distributed systems</li>
                <li>real-time & hybrid systems</li>
                <li>security-sensitive systems</li>
            </ul>
            <p>TLA+ offers a uniform language where transition system and properties represented as formulas, where Mathematics form the basis for description and analysis of reactive and distributed systems</p>
            <p>TLA defines two levels of syntax: action formulas and temporal formulas.</p>
               <ul><li>action formulas describe states and state transitions</li>
               <li>temporal formulas describe state sequences</li></ul>
            <p>TLA+ also includes concepts such as safety (something bad should never happen) and liveness (something good eventually happens).</p>
            <br>
            <h4 id="actions">Actions</h3>
            <p>
                Actions are pure functions which accept a dataset and return a dataset. The purpose of a function is to compute the values 
                we want the model to accept. There is nothing else to it.
                <a href="http://redux.js.org/docs/basics/Actions.html">In Redux for instance</a>, "actions" are closer to intent or event. This is a fundamental difference between Redux and SAM 
                because in Redux it creates an unnecessary and unwanted coupling between the model mutations and the logic that translates intents into model property values.
<div class="code-window"><pre><code class="language-javascript">
    
    function action(data,present) {
    
        // compute the values we want the model to mutate to
        var data_ = the_actual_function_implementing_the_action(data) ;
        
        // present these values to the model
        present(data_) ;
        
        // since we are in a reactive loop, the action returns nothing
    }
    
</code></pre></div>
                Actions typically hold context specific logic. If we take the example of a "change of address" action, we might define 
                implement some context specific rules, such as when there is no country specified in the input dataset, the default country 
                is Australia, while the model is responsible for the integrity of a customer address. 
                In the context of SAM, actions play another important role with respect to invoking 3rd party APIs. For instance, we can define an action which 
                will invoke a 3rd party validation service, which given an address, returns the postal address (or an error). It is then 
                the postal address which is presented to the model. 
<div class="code-window"><pre><code class="language-javascript">
    
    function changeOfAddress(address,present) {
        
        address = address || {} ;
        address.country = address.country || 'Australia' ; 
        getPostalAddress( address, function(addr) {
            // assuming the dataset returned by the 3rd party
            // service can be directly presented to the model
            present(addr) ;
        }) ;
        
    }
    
</code></pre></div>
            </p>
            <br>
            <h4 id="model">Model</h3>
            <p>
                
            </p>
            <br>
            <h4 id="state">State</h3>
            <p>
                
            </p>
            <br>
            <h4 id="sr">State Representation</h3>
            <p>
                
            </p>
            <br>
            <h4 id="sr">Wiring</h3>
            <p>
                
            </p>
            

          </section>

          <section>
          <h2 id="getstarted">How can I get started?</h2>
          <p>We suggest that you download an HTML5 template of your choice and start building an application with it. To make this tutorial more realistic, we are going to build a simple Web Site with Blog and a Contact form.</p>
          <p>That <a href="http://html5up.net/zerofour">free template</a> seems like a great starting point. The list of components are easy to identify, from the index.html file:</p>
          <ul>
              <li>header</li>
              <li>banner</li>
              <li>heading</li>
              <li>services</li>
              <li>case studies</li>
              <li>blog (recent posts, and spotlight)</li>
              <li>filler links</li>
              <li>get in touch</li>
          </ul>
          <p>Many developers dislike the code that will follow, and for a reason that I still have difficulty to comprehend, they will prefer using React/JSX, Mithril or worse some templates. 
          Since this is a matter of preferences, there is not much point in arguing about it. I just happen to prefer a raw JavaScript/HTML5/CSS3 style. It is not just a style
          that would enable the greatest number of developers to become full stack developers (with Node.js), but it is a style that also enables the greatest 
          decoupling between the View and the Model. It is also a style that supports <a href="https://strongloop.com/strongblog/node-js-react-isomorphic-javascript-why-it-matters/">Isomorphic JavaScript</a> readily. So let's go ahead and start creating the component interfaces:</p> 

<div class="code-window">
              <!-- div class="code-preview">

              </div-->

<pre class="line-numbers"><code class="language-javascript">var theme = {} ;

theme.header = function( name, menu ) { } ;

theme.banner = function( title, tagLine, buttonLink, buttonLabel ) { } ;

theme.heading = function( title, tagLine) { } ;

theme.services = function( serviceList ) { } ;

theme.description = function( text ) { } ;

theme.caseStudies = function(   title1, tagLine1, description1, link1, button1, icon1, 
                                title2, tagLine2, description2, link2, button2, icon2  ) {  } ;

theme.blog = function( posts, title, tagLine, description ) { } ;

theme.footer = function( fillers ) { } ;

theme.contact = function( title, description, learnMoreLink, socialLinks, address, phone, email ) { } ;
</code></pre>
            </div>
            <p>The implementation of each function is just a parameterization of the HTML template:</p>
            <div class="code-window">
                          <!-- div class="code-preview">
            
                          </div-->
            
<pre class="line-numbers"><code class="language-javascript">theme.caseStudies = function( title1, tagLine1, description1, link1, button1, icon1, 
                              title2, tagLine2, description2, link2, button2, icon2  ) { 
    icon1 = icon1 || 'arrow-circle-right' ;
    icon2 = icon2 || 'info-circle' ;
    return (
    '&lt;div class="wrapper style2"&gt;\n\
        &lt;div class="inner"&gt;\n\
            &lt;!-- Feature 2 --&gt;\n\
                &lt;section class="container box feature2"&gt;\n\
                    &lt;div class="row"&gt;\n\
                        &lt;div class="6u 12u(mobile)"&gt;\n\
                            &lt;section&gt;\n\
                                &lt;header class="major"&gt;\n\
                                    &lt;h2&gt;'+title1+'&lt;/h2&gt;\n\
                                    &lt;p&gt;'+tagLine1+'&lt;/p&gt;\n\
                                &lt;/header&gt;\n\
                                &lt;p&gt;'+description1+'&lt;/p&gt;\n\
                                &lt;footer&gt;\n\
                                    &lt;a href="'+link1+'" class="button medium icon fa-'+icon1+'"&gt;'+button1+'&lt;/a&gt;\n\
                                &lt;/footer&gt;\n\
                            &lt;/section&gt;\n\
                        &lt;/div&gt;\n\
                        &lt;div class="6u 12u(mobile)"&gt;\n\
                            &lt;section&gt;
                                &lt;header class="major"&gt;\n\
                                    &lt;h2&gt;'+title2+'&lt;/h2&gt;\n\
                                    &lt;p&gt;'+tagLine2+'&lt;/p&gt;\n\
                                &lt;/header&gt;\n\
                                &lt;p&gt;'+description2+'&lt;/p&gt;\n\
                                &lt;footer&gt;\n\
                                    &lt;a href="'+link2+'" class="button medium alt icon fa-'+icon2+'"&gt;'+button2+'&lt;/a&gt;\n\
                                &lt;/footer&gt;\n\
                            &lt;/section&gt;\n\
                        &lt;/div&gt;\n\
                    &lt;/div&gt;\n\
                &lt;/section&gt;\n\
            &lt;/div&gt;\n\
    &lt;/div&gt;\n'
    ) ;
} ;

</code></pre>
                    </div>
            
          </section>
        </article>
        <!-- END Main content -->
      </div>
    </main>


    <!-- Footer -->
    <footer class="site-footer">
      <div class="container-fluid">
        <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>

        <div class="row">
          <div class="col-md-6 col-sm-6">
            <p>Copyright &copy; 2016. xgen.io - all right reserved</p>
          </div>
          <div class="col-md-6 col-sm-6">
            <ul class="footer-menu">
              <li><a href="page_changelog.html">Changelog</a></li>
              <li><a href="page_credits.html">Credits</a></li>
              <li><a href="http://xgenio.com/contact-xgenio/">Contact us</a></li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    <!-- END Footer -->

    <!-- Scripts -->
    <script src="assets/js/theDocs.all.min.js"></script>
    <script src="assets/js/custom.js"></script>

  </body>
</html>
